```bash
# 列出本机的所有 image 文件。
$ docker image ls

# 删除 image 文件
$ docker image rm [imageName]
```

```bash
# 将命令从远程抓到本地
$ docker image pull library/hello-world
```

```powershell
PS C:\Users\darcy> docker image pull library/hello-world
Using default tag: latest
latest: Pulling from library/hello-world
0e03bdcc26d7: Pull complete
Digest: sha256:e7c70bb24b462baa86c102610182e3efcb12a04854e8c582838d92970a09f323
Status: Downloaded newer image for hello-world:latest
docker.io/library/hello-world:latest
```

```powershell
C:\Users\darcy> docker image ls
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
hello-world         latest              bf756fb1ae65        11 months ago       13.3kB
```

```bash
# 运行容器
$ docker container run hello-world
```

```powershell
PS C:\Users\darcy> docker container run hello-world

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/
```

```bash
# 终止容器
$ docker container kill [containID]
```

容器iamges 运行生成的 容器本身也有一个文件,运行生成,结束不删除

```powershell
C:\Users\darcy> docker container ls -all
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES
5f996dbc110c        hello-world         "/hello"            2 minutes ago       Exited (0) 2 minutes ago                       focused_mestorf
```

```bash
# 删除运行产生的容器文件
$ docker container rm [containerID]
```

```
.dockerignore 文件,和.gitignore 类似
```

```dockerfile
FROM node:8.4
COPY . /app
WORKDIR /app
RUN npm install --registry=https://registry.npm.taobao.org
EXPOSE 3000
```

- `FROM node:8.4`：该 image 文件继承官方的 node image，冒号表示标签，这里标签是`8.4`，即8.4版本的 node。
- `COPY . /app`：将当前目录下的所有文件（除了`.dockerignore`排除的路径），都拷贝进入 image 文件的`/app`目录。
- `WORKDIR /app`：指定接下来的工作路径为`/app`。
- `RUN npm install`：在`/app`目录下，运行`npm install`命令安装依赖。注意，安装后所有的依赖，都将打包进入 image 文件。
- `EXPOSE 3000`：将容器 3000 端口暴露出来， 允许外部连接这个端口。

```bash
# 创建image文件
$ docker image build -t koa-demo .
# 或者
$ docker image build -t koa-demo:0.0.1 .
```

```bash
# 运行容器
$ docker container run -p 8000:3000 -it koa-demo /bin/bash
# 或者
$ docker container run -p 8000:3000 -it koa-demo:0.0.1 /bin/bash
```

- `-p`参数：容器的 3000 端口映射到本机的 8000 端口。
- `-it`参数：容器的 Shell 映射到当前的 Shell，然后你在本机窗口输入的命令，就会传入容器。
- `koa-demo:0.0.1`：image 文件的名字（如果有标签，还需要提供标签，默认是 latest 标签）。
- `/bin/bash`：容器启动以后，内部第一个执行的命令。这里是启动 Bash，保证用户可以使用 Shell。

```powershell
PS D:\app\koa-demos> docker container run -p 8000:3000 -it koa-demo /bin/bash
root@a6c47fbed774:/app#
```

```bash
# --rm 容器文件字啊运行结束后删除
$ docker container run --rm -p 8000:3000 -it koa-demo /bin/bash
```

```bash
FROM node:8.4
COPY . /app
WORKDIR /app
RUN npm install --registry=https://registry.npm.taobao.org
EXPOSE 3000
CMD node demos/01.js 
```

`CMD node demos/01.js `：容器启动以后，启动命令。

```bash
# 登录帐号
$ docker login
```

```bash
# 标记image 的版本和作者
$ docker image tag [imageName] [username]/[repository]:[tag]
# 实例
$ docker image tag koa-demos:0.0.1 ruanyf/koa-demos:0.0.1

#重构
$ docker image build -t [username]/[repository]:[tag] .
```

```bash
#发布
$ docker image push [username]/[repository]:[tag]
# 发布的username要和登录的username一致
```

```bash
#运行已经结束的容器文件
$ docker container start [containerID]
```

```bash
#先杀死进程
$ bash container stop [containerID]
```

```bash
#查看容器的背景输出
$ docker container logs [containerID]
```

```bash
# 进入一个正在运行的容器
$ docker container exec -it [containerID] /bin/bash
```

```bash
# 将容器中的被容复制到本地
$ docker container cp [containID]:[/path/to/file] .
```


## 触发器



```sql
CREATE OR REPLACE TRIGGER tic_TRIGGER
AFTER INSERT
      OR
DELETE
      OR
UPDATE
      ON tic_file for each row 
DECLARE V_TYPE TIC_LOG.L_TYPE % TYPE;

BEGIN IF INSERTING THEN --INSERT触发
V_TYPE := 'INSERT';

DBMS_OUTPUT.PUT_LINE('记录已经成功插入，并已记录到日志');

ELSIF UPDATING THEN --UPDATE触发
V_TYPE := 'UPDATE';

DBMS_OUTPUT.PUT_LINE('记录已经成功更新，并已记录到日志');

ELSIF DELETING THEN --DELETE触发
V_TYPE := 'DELETE';

DBMS_OUTPUT.PUT_LINE('记录已经成功删除，并已记录到日志');

END IF;

INSERT INTO
      TIC_LOG
VALUES
      (
            :OLD.tic00,
            :OLD.tic01,
            :OLD.tic02,
            :OLD.tic03,
            :OLD.tic04,
            :OLD.tic05,
            :OLD.tic06,
            :OLD.tic07,
            :OLD.tic07f,
            :OLD.tic08,
            :OLD.tic09,
            USER,
            V_TYPE,
            TO_CHAR(SYSDATE, 'yyyy-mm-dd hh24:mi:ss')
      );

--USER表示当前用户名
END;

```

